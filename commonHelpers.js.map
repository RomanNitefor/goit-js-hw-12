{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function searchPictures(searchTerm, page, limit) {\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=43779125-040e3030fad6a4afa34a77542&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${limit}`\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching pictures:', error);\n    throw error;\n  }\n}\n","export function listPictures(gallery, pictures, lightbox) {\n  const result = pictures.hits\n    .map(picture => {\n      return `<li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${picture.largeImageURL}\">\n                        <img class=\"gallery-image\" src=\"${picture.webformatURL}\" alt=\"${picture.tags}\">\n                    </a>\n                    <ul class=\"info\">\n                        <li class=\"info-list\">Likes: <span>${picture.likes}</span></li>\n                        <li class=\"info-list\">Views: <span>${picture.views}</span></li>\n                        <li class=\"info-list\">Comments: <span>${picture.comments}</span></li>\n                        <li class=\"info-list\">Downloads: <span>${picture.downloads}</span></li>\n                    </ul>\n                </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', result);\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchPictures } from './js/pixabay-api.js';\nimport { listPictures } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input[name=\"text\"]');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet searchTerm = '';\nlet page = 1;\nconst limit = 15;\nlet totalHits = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  searchTerm = input.value.trim();\n  if (searchTerm !== '') {\n    page = 1;\n    gallery.innerHTML = '';\n    hideLoadMoreButton();\n    showLoader();\n    await fetchAndRenderPictures();\n  } else {\n    event.target.reset();\n    iziToast.info({\n      message: 'Please enter the value',\n      position: 'center',\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n  await fetchAndRenderPictures();\n});\n\nasync function fetchAndRenderPictures() {\n  try {\n    const pictures = await searchPictures(searchTerm, page, limit);\n    totalHits = pictures.totalHits;\n\n    if (pictures.hits.length === 0 && page === 1) {\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n      });\n      hideLoadMoreButton();\n    } else {\n      listPictures(gallery, pictures, lightbox);\n      if (page * limit < totalHits) {\n        showLoadMoreButton();\n      } else {\n        hideLoadMoreButton();\n\n        if (page * limit >= totalHits && page > 1) {\n          iziToast.error({\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n            position: 'bottomCenter',\n          });\n        }\n      }\n      smoothScroll();\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Sorry, there was an error processing your request.',\n      position: 'center',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["searchPictures","searchTerm","page","limit","axios","error","listPictures","gallery","pictures","lightbox","result","picture","form","input","loader","loadMoreButton","totalHits","event","hideLoadMoreButton","showLoader","fetchAndRenderPictures","iziToast","showLoadMoreButton","smoothScroll","hideLoader","SimpleLightbox","cardHeight"],"mappings":"owBACO,eAAeA,EAAeC,EAAYC,EAAMC,EAAO,CAC5D,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAC3B,qEAAqEH,CAAU,iEAAiEC,CAAI,aAAaC,CAAK,EAC5K,GACoB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,2BAA4BA,CAAK,EACzCA,CACP,CACH,CCXO,SAASC,EAAaC,EAASC,EAAUC,EAAU,CACxD,MAAMC,EAASF,EAAS,KACrB,IAAIG,GACI;AAAA,oDACuCA,EAAQ,aAAa;AAAA,0DACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,6DAGvCA,EAAQ,KAAK;AAAA,6DACbA,EAAQ,KAAK;AAAA,gEACVA,EAAQ,QAAQ;AAAA,iEACfA,EAAQ,SAAS;AAAA;AAAA,sBAG7E,EACA,KAAK,EAAE,EACVJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC9CD,EAAS,QAAO,CAClB,CCVA,MAAMG,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,oBAAoB,EACnDN,EAAU,SAAS,cAAc,UAAU,EAC3CO,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAId,EAAa,GACbC,EAAO,EACX,MAAMC,EAAQ,GACd,IAAIa,EAAY,EAEhBJ,EAAK,iBAAiB,SAAU,MAAMK,GAAS,CAC7CA,EAAM,eAAc,EACpBhB,EAAaY,EAAM,MAAM,OACrBZ,IAAe,IACjBC,EAAO,EACPK,EAAQ,UAAY,GACpBW,IACAC,IACA,MAAMC,EAAsB,IAE5BH,EAAM,OAAO,QACbI,EAAS,KAAK,CACZ,QAAS,yBACT,SAAU,QAChB,CAAK,EAEL,CAAC,EAEDN,EAAe,iBAAiB,QAAS,SAAY,CACnDb,GAAQ,EACRiB,IACA,MAAMC,EAAsB,CAC9B,CAAC,EAED,eAAeA,GAAyB,CACtC,GAAI,CACF,MAAMZ,EAAW,MAAMR,EAAeC,EAAYC,EAAMC,CAAK,EAC7Da,EAAYR,EAAS,UAEjBA,EAAS,KAAK,SAAW,GAAKN,IAAS,GACzCmB,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,QAClB,CAAO,EACDH,MAEAZ,EAAaC,EAASC,EAAUC,CAAQ,EACpCP,EAAOC,EAAQa,EACjBM,KAEAJ,IAEIhB,EAAOC,GAASa,GAAad,EAAO,GACtCmB,EAAS,MAAM,CACb,QACE,6DACF,SAAU,cACtB,CAAW,GAGLE,IAEH,OAAQlB,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBgB,EAAS,MAAM,CACb,QAAS,qDACT,SAAU,QAChB,CAAK,CACL,QAAY,CACRG,GACD,CACH,CAEA,SAASF,GAAqB,CAC5BP,EAAe,MAAM,QAAU,OACjC,CAEA,SAASG,GAAqB,CAC5BH,EAAe,MAAM,QAAU,MACjC,CAEA,SAASI,GAAa,CACpBL,EAAO,MAAM,QAAU,OACzB,CAEA,SAASU,GAAa,CACpBV,EAAO,MAAM,QAAU,MACzB,CAEA,MAAML,EAAW,IAAIgB,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASF,GAAe,CACtB,KAAM,CAAE,OAAQG,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}